### 网络7层架构
    1. 物理层
        主要定义物理设备标准，如网线的接口类型、光纤的接口类型、各种传输介质的传输速率
        等。它的主要作用是传输比特流（就是由 1、0 转化为电流强弱来进行传输,到达目的地后在转化为
        1、0，也就是我们常说的模数转换与数模转换）。这一层的数据叫做比特。
    2. 数据链路层
        主要将从物理层接收的数据进行 MAC 地址（网卡的地址）的封装与解封装。常把这
        一层的数据叫做帧。在这一层工作的设备是交换机，数据通过交换机来传输
    3. 网络层
        主要将从下层接收到的数据进行 IP 地址（例 192.168.0.1)的封装与解封装。在这一层工
        作的设备是路由器，常把这一层的数据叫做数据包
    4. 传输层
        定义了一些传输数据的协议和端口号（WWW 端口 80 等），如：TCP（传输控制协议，
        传输效率低，可靠性强，用于传输可靠性要求高，数据量大的数据），UDP（用户数据报协议，
        与 TCP 特性恰恰相反，用于传输可靠性要求不高，数据量小的数据，如 QQ 聊天数据就是通过这
        种方式传输的）。 主要是将从下层接收的数据进行分段进行传输，到达目的地址后在进行重组
    5. 会话层
        通过传输层（端口号：传输端口与接收端口）建立数据传输的通路。主要在你的系统之间
        发起会话或或者接受会话请求（设备之间需要互相认识可以是 IP 也可以是 MAC 或者是主机名）
    6. 表示层
        主要是进行对接收的数据进行解释、加密与解密、压缩与解压缩等（也就是把计算机能够
        识别的东西转换成人能够能识别的东西（如图片、声音等））
    7. 应用层
        主要是一些终端的应用，比如说FTP（各种文件下载），WEB（IE浏览），QQ之类的（你
        就把它理解成我们在电脑屏幕上可以看到的东西．就 是终端应用）。
        
        
### TCP/IP 原理
     TCP/IP 协议不是 TCP 和 IP 这两个协议的合称，而是指因特网整个 TCP/IP 协议族。从协议分层
     模型方面来讲，TCP/IP 由四个层次组成：网络接口层、网络层、传输层、应用层
     
     网络访问层(Network Access Layer)
         1. 网络访问层(Network Access Layer)在 TCP/IP 参考模型中并没有详细描述，只是指出主机
         必须使用某种协议与网络相连
     
     网络层(Internet Layer)
         网络层(Internet Layer)是整个体系结构的关键部分，其功能是使主机可以把分组发往任何网
         络，并使分组独立地传向目标。这些分组可能经由不同的网络，到达的顺序和发送的顺序也
         可能不同。高层如果需要顺序收发，那么就必须自行处理对分组的排序。互联网层使用因特
         网协议(IP，Internet Protocol)。 
         
     传输层(Tramsport Layer-TCP/UDP)
        传输层(Tramsport Layer)使源端和目的端机器上的对等实体可以进行会话。在这一层定义了
        两个端到端的协议：传输控制协议(TCP，Transmission Control Protocol)和用户数据报协
        议(UDP，User Datagram Protocol)。TCP 是面向连接的协议，它提供可靠的报文传输和对
        上层应用的连接服务。为此，除了基本的数据传输外，它还有可靠性保证、流量控制、多路
        复用、优先权和安全性控制等功能。UDP 是面向无连接的不可靠传输的协议，主要用于不需
        要 TCP 的排序和流量控制等功能的应用程序。
        
     应用层(Application Layer)
        应用层(Application Layer)包含所有的高层协议，包括：虚拟终端协议(TELNET，
        TELecommunications NETwork)、文件传输协议(FTP，File Transfer Protocol)、电子邮件
        传输协议(SMTP，Simple Mail Transfer Protocol)、域名服务(DNS，Domain Name
        Service)、网上新闻传输协议(NNTP，Net News Transfer Protocol)和超文本传送协议
        (HTTP，HyperText Transfer Protocol)等。
        
### TCP 三次握手/四次挥手
    TCP 在传输之前会进行三次沟通，一般称为"三次握手"，传完数据断开的时候要进行四次沟通，一般
    称为"四次挥手"
    
    三次握手：
        1. client发送SYN = 1，seq = X，客户端 SYN_SENT 状态
        2. server发送SYN = 1, ACK = 1, seq = y， ack = x + 1 服务端 SYN_RCVD状态
        3. client发送ACK = 1, seq = x + 1，ack = y + 1 客户端与服务端进入 ESTABLISHED状态
    
    四次挥手：
        TCP 建立连接要进行三次握手，而断开连接要进行四次。这是由于 TCP 的半关闭造成的。因为 TCP 连
        接是全双工的(即数据可在两个方向上同时传递)所以进行关闭时每个方向上都要单独进行关闭。这个单
        方向的关闭就叫半关闭。当一方完成它的数据发送任务，就发送一个 FIN 来向另一方通告将要终止这个
        方向的连接。
        
        1. client 发送FIN = 1,seq = u， 进入 FIN_WAIT1终止等待1状态
        2. server 发送ACK = 1，seq = v，ack = u + 1 进入 CLOSE_WAIT关闭等待状态
            client 进入 FIN_WAIT2终止等待2状态
        3. server 发送FIN = 1,ACK = 1,seq = w，ack = u + 1
            server进入LAST_ACK最后确认状态
        4. client 发送 ACK = 1, seq = u + 1，ack = w + 1
            client进入TIME_WAIT时间等待状态
            server 进入CLOSED状态
        5. 等待 2msl后，client进入CLOSED状态
        
### HTTP原理
    HTTP是一个无状态的协议，无状态是指客户机(Web浏览器)和服务器之间不需要建立持久的连接
    这意味着当一个客户端向服务器端发出请求，然后服务器返回响应(response)，连接就被关闭了
    在服务器端不保留连接的有关信息，HTTP遵循请求(Request)/应答(Response)模型，客户机(浏览器)
    向服务器发送请求，服务器处理请求并返回适当的应答，所有HTTP连接都被构造成一套请求和应答
    
### 传输流程
    1. 地址解析：
        如用客户端浏览器请求这个页面：http://localhost.com:8080/index.htm 从中分解出协议名、主机名、
        端口、对象路径等部分，对于我们的这个地址，解析得到的结果如下
        协议名：http
        主机名：localhost.com
        端口：8080
        对象路径：/index.html
        
        在这一步，需要域名系统DNS解析域名localhost.com得到主机的IP地址
    
    2. 封装 HTTP 请求数据包
       把以上部分结合本机自己的信息，封装成一个 HTTP 请求数据包
    
    3. 封装成 TCP 包并建立连接
       封装成 TCP 包，建立 TCP 连接（TCP 的三次握手）
       
    4. 客户机发送请求命令
       客户机发送请求命令：建立连接后，客户机发送一个请求给服务器，请求方式的格式为：统一资
       源标识符（URL）、协议版本号，后边是 MIME 信息包括请求修饰符、客户机信息和可内容
          
    5. 服务器响应
        服务器接到请求后，给予相应的响应信息，其格式为一个状态行，包括信息的协议版本号、一个成功或
        错误的代码，后边是 MIME 信息包括服务器信息、实体信息和可能的内容
        
    6. 服务器关闭 TCP 连接
        服务器关闭 TCP 连接：一般情况下，一旦 Web 服务器向浏览器发送了请求数据，它就要关闭 TCP 连
        接，然后如果浏览器或者服务器在其头信息加入了这行代码 Connection:keep-alive，TCP 连接在发送
        后将仍然保持打开状态，于是，浏览器可以继续通过相同的连接发送请求。保持连接节省了为每个请求
        建立新连接所需的时间，还节约了网络带宽
        
### HTTPS
    HTTPS（全称：Hypertext Transfer Protocol over Secure Socket Layer），是以安全为目标的
    HTTP 通道，简单讲是 HTTP 的安全版。即 HTTP 下加入 SSL 层，HTTPS 的安全基础是 SSL。其所用
    的端口号是 443。 过程大致如下：
    
    建立连接获取证书
         SSL 客户端通过 TCP 和服务器建立连接之后（443 端口），并且在一般的 tcp 连接协商（握
        手）过程中请求证书。即客户端发出一个消息给服务器，这个消息里面包含了自己可实现的算
        法列表和其它一些需要的消息，SSL 的服务器端会回应一个数据包，这里面确定了这次通信所
        需要的算法，然后服务器向客户端返回证书。（证书里面包含了服务器信息：域名。申请证书
        的公司，公共秘钥）
        
    证书验证
         Client 在收到服务器返回的证书后，判断签发这个证书的公共签发机构，并使用这个机构的公
        共秘钥确认签名是否有效，客户端还会确保证书中列出的域名就是它正在连接的域名。
    
    数据加密和传输
        如果确认证书有效，那么生成对称秘钥并使用服务器的公共秘钥进行加密。然后发送给服务
        器，服务器使用它的私钥对它进行解密，这样两台计算机可以开始进行对称加密进行通信

### CDN 原理
     CDN一般包含分发服务系统，负载均衡系统和管理系统
     
### 分发服务系统
     其基本的工作单元就是各个 Cache 服务器。负责直接响应用户请求，将内容快速分发到用户；同时还
     负责内容更新，保证和源站内容的同步
     根据内容类型和服务种类的不同，分发服务系统分为多个子服务系统，如：网页加速服务、流媒体加速
     服务、应用加速服务等。每个子服务系统都是一个分布式的服务集群，由功能类似、地域接近的分布部
     署的 Cache 集群组成。
     在承担内容同步、更新和响应用户请求之外，分发服务系统还需要向上层的管理调度系统反馈各个
     Cache 设备的健康状况、响应情况、内容缓存状况等，以便管理调度系统能够根据设定的策略决定由
     哪个 Cache 设备来响应用户的请求。
     
### 负载均衡系统
    负载均衡系统是整个 CDN 系统的中枢。负责对所有的用户请求进行调度，确定提供给用户的最终访问
    地址。
    使用分级实现。最基本的两极调度体系包括全局负载均衡（GSLB）和本地负载均衡（SLB）。
    GSLB 根据用户地址和用户请求的内容，主要根据就近性原则，确定向用户服务的节点。一般通过 DNS
    解析或者应用层重定向（Http 3XX 重定向）的方式实现。
    SLB 主要负责节点内部的负载均衡。当用户请求从 GSLB 调度到 SLB 时，SLB 会根据节点内各个
    Cache 设备的工作状况和内容分布情况等对用户请求重定向。SLB 的实现有四层调度（LVS）、七层调
    度（Nginx）和链路负载调度等
    
  
    
